!function(e,t,o,i){"use strict";function a(e){this.init(e)}function r(t){this.elem=e(t)}function s(e){var t=this;t.base=e}function n(e){var t=this;t.base=e}var c=o,l=t,u=(e(c),e(l),"magicWall"),d="magicwall",m=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),p=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.msCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),x=function(){return function(t){function o(){a=i(null,Math.max(0,r),t.from,t.to-t.from,s),t.callback&&t.callback(a,t.callbackParams,r,s),t.change&&t.change(a,t.callbackParams,r,s),r==s?t.complete&&t.complete():t.context[t.id]=m(function(){o()}),r=Math.min(s,r+1e3/60)}var i,a=t.from,r=-t.delay||0,s=t.duration?t.duration:1e3;i=e.easing&&e.easing[t.easing]?e.easing[t.easing]:h.swing,t.context[t.id]&&p(t.context[t.id]),o()}}(),h={swing:function(e,t,o,i,a){return-i*(t/=a)*(t-2)+o}},A=function(){var e=t.getComputedStyle(o.documentElement,""),i=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],a="WebKit|Moz|MS|O".match(new RegExp("("+i+")","i"))[1];return{dom:a,lowercase:i,css:"-"+i+"-",js:i[0].toUpperCase()+i.substr(1)}}(),f=function(){var e,a;return e=o.createElement("p"),e.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",o.body.insertBefore(e,o.body.lastChild),a=t.getComputedStyle(e).getPropertyValue("transform"),a!==i?"none"!==a:!1}();!function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}(),a.prototype={init:function(e){var t=this;return t.elem=e,t},update:function(){var e,t=this,o=[];return o.push("translate3d("+t.x()+"px, "+t.y()+"px, "+t.z()+"px)"),o.push("rotateX("+t.rotX()+"deg)"),o.push("rotateY("+t.rotY()+"deg)"),o.push("rotateZ("+t.rotZ()+"deg)"),o.push("scale("+t.scale()+")"),e={},e[A.css+"transform"]=o.join(" "),e[A.css+"transform-origin"]=100*t.originX()+"% "+100*t.originY()+"%",e.opacity=t.opacity(),t.elem.css(e),t},animate:function(t,o,i){var a=this;t=t.split(",");for(var r in t)i=e.extend(!0,{},i),i.id=t[r]+"Tween",i.context=a,i.from=a[t[r]](),i.to=o,i.callback=function(e){return function(o){a[t[e]](o),a.update()}}(r),x(i);return a},stop:function(e){var t=this;e=e.split(",");for(var o in e)p(t[e[o]+"Tween"]);return t},set:function(e,t){var o=this;e=e.split(",");for(var i in e)o[e[i]](t);return o},x:function(e){var t=this;return e===i?t._x||0:(t._x=e,t)},y:function(e){var t=this;return e===i?t._y||0:(t._y=e,t)},z:function(e){var t=this;return e===i?t._z||0:(t._z=e,t)},rotX:function(e){var t=this;return e===i?t._rx||0:(t._rx=e,t)},rotY:function(e){var t=this;return e===i?t._ry||0:(t._ry=e,t)},rotZ:function(e){var t=this;return e===i?t._rz||0:(t._rz=e,t)},origin:function(e){var t=this;return t.originX(e).originY(e),t},originX:function(e){var t=this;return e===i?t._ogx===i?.5:t._ogx:(t._ogx=e,t)},originY:function(e){var t=this;return e===i?t._ogy===i?.5:t._ogy:(t._ogy=e,t)},opacity:function(e){var t=this;return e===i?t._op===i?1:t._op:(t._op=e,t)},scale:function(e){var t=this;return e===i?t._sc===i?1:t._sc:(t._sc=e,t)}};var y={items:"."+d+"-items",item:"."+d+"-item",itemWrap:"."+d+"-item-wrap",thumb:"."+d+"-item-thumb"};r.prototype={init:function(t,o){var i=this;return i.api(t,o)?i:(i.options=e.extend(!0,{},e.fn[u].options,i.elem.data(),t),i.setup(),i.update(),i.manager=new s(i),i.manager.start(),i)},destroy:function(){var e,t,o=this;for(o.destroyed=!0,o.manager.stop(),delete o.manager,t=o.items.length,e=0;t>e;e++)o.items[e].destroy(),delete o.items[e];return o.elem.data("_"+u+"Instance",null),o},setup:function(){var e,t,o,i=this;for(i.items=[],i.domItems=i.elem.find(y.items).children(),t=i.domItems.length,o=0;t>o;o++)e=new n(i),e.init(i.domItems[o]),i.items.push(e);return i},getCountResponsive:function(){var e,t,o,a,r=this,s=r.elem.outerWidth();for(t=r.options.breakpoints?r.options.breakpoints.split(","):[],o=t.length,e={},a=0;o>a;a++)s<=t[a]&&r.options["countX_"+t[a]]!==i&&(e.x=r.options["countX_"+t[a]]),s<=t[a]&&r.options["countY_"+t[a]]!==i&&(e.y=r.options["countY_"+t[a]]);return e},update:function(){var e,t,o,i,a,r,s,n,c,l=this,u=l.elem.width(),d=l.elem.height();if(!l.destroyed){for(e=l.getCountResponsive(),e.x?l.xCount=e.x:l.options.countX?l.xCount=l.options.countX:(t=Math.floor(u/l.options.maxItemWidth),o=Math.ceil(u/l.options.maxItemWidth),l.xCount=u/t>l.options.maxItemWidth?o:t,l.xCount=Math.max(l.options.minCountX||1,l.xCount),l.options.maxCountX&&(l.xCount=Math.min(l.options.maxCountX,l.xCount))),e.y?l.yCount=e.y:l.options.countY?l.yCount=l.options.countY:(i=Math.floor(d/l.options.maxItemHeight),a=Math.ceil(d/l.options.maxItemHeight),l.yCount=d/i>l.options.maxItemHeight?a:i,l.yCount=Math.max(l.options.minCountY||1,l.yCount),l.options.maxCountY&&(l.yCount=Math.min(l.options.maxCountY,l.yCount))),l.itemWidth=Math.ceil(u/l.xCount),l.itemHeight=Math.ceil(d/l.yCount),l.domItems.hide().css("z-index",0),l.elem.css("overflow",l.overflow),l.grid=[],l.rows=[],l.columns=[],n=l.xCount*l.yCount,c=0;n>c;c++)r=c%l.xCount,s=Math.floor(c/l.xCount),l.items[c]&&(l.items[c].reset().setPos(r,s).loadThumb().elem.css({width:l.itemWidth,height:l.itemHeight}).show(),l.grid.push(l.items[c]),l.rows[s]||(l.rows[s]=[]),l.rows[s].push(l.items[c]),l.columns[r]||(l.columns[r]=[]),l.columns[r].push(l.items[c]));return l}},getItem:function(e,t,o,i,a){var r,s,n,c,l,u,d,m,p,x,h=this;if(!(h.items.length<=h.grid.length||h.destroyed)){switch(u=h.items[e],d=h.items[t],u.reset(),d.reset(),u.elem.css("z-index",9999),d.elem.css("z-index",9999),p="-"==o.slice(0,1)?-1:1,m=o.slice(o.length-1),a){case"easeInBackOutElastic":s=.33*i,n=.66*i,c="easeInBack",l="easeOutElastic";break;case"easeInBackOutCubic":s=.33*i,n=.66*i,c="easeInBack",l="easeOutCubic";break;case"easeInCubicOutElastic":s=.33*i,n=.66*i,c="easeInCubic",l="easeOutElastic";break;case"easeInBackOutBack":s=.5*i,n=s,c="easeInBack",l="easeOutBack";break;case"easeInCubicOutCubic":s=.5*i,n=s,c="easeInCubic",l="easeOutCubic";break;case"easeInCubicOutBounce":s=.5*i,n=s,c="easeInCubic",l="easeOutBounce";break;default:s=.5*i,n=s,c=l=a}switch(o){case"rollInX":case"rollInY":case"-rollInX":case"-rollInY":h.swapItems(t,e),d.elem.css("z-index",0),d.setPos(u.px,u.py).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),u.css3d["origin"+m](p>0?1:0).animate("opacity",.5,{duration:s,easing:c}).animate("rot"+("Y"==m?"X":"Y"),-p*("Y"==m?1:-1)*(-90-180*Math.atan(.5*("Y"==m?h.itemHeight:h.itemWidth)/h.options.perspective)/Math.PI),{duration:s,easing:c,complete:function(){d.css3d.opacity(.5)["origin"+m](p>0?0:1)["rot"+("Y"==m?"X":"Y")](-p*("Y"==m?1:-1)*(90+180*Math.atan(.5*("Y"==m?h.itemHeight:h.itemWidth)/h.options.perspective)/Math.PI)).update().animate("opacity",1,{duration:n,easing:l}).animate("rot"+("Y"==m?"X":"Y"),0,{duration:n,easing:l,complete:function(){h.update(),u.reset()}})}}),d.css3d.opacity(.5)["origin"+m](p>0?0:1)["rot"+("Y"==m?"X":"Y")](-p*("Y"==m?1:-1)*(90+180*Math.atan(.5*("Y"==m?h.itemHeight:h.itemWidth)/h.options.perspective)/Math.PI)).update();break;case"rollOutX":case"rollOutY":case"-rollOutX":case"-rollOutY":h.swapItems(t,e);var A=e+p*("Y"==m?h.xCount:1);A>=0&&("Y"==m||A%h.xCount!=h.xCount-(p>0?0:1)&&A%h.xCount!=(p>0?0:-1))&&h.swapItems(t,A),d.elem.css("z-index",0);var f=!1;("-rollOutY"==o&&0==u.py||"rollOutY"==o&&u.py==h.yCount-1||"-rollOutX"==o&&0==u.px||"rollOutX"==o&&u.px==h.xCount-1)&&(f=!0),d.setPos(u.px,u.py).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),u.css3d["origin"+m](p>0?1:0).animate("opacity",.5,{duration:s,easing:c}).animate("rot"+("Y"==m?"X":"Y"),p*("Y"==m?1:-1)*(-90+180*Math.atan(.5*("Y"==m?h.itemHeight:h.itemWidth)/h.options.perspective)/Math.PI),{duration:s,easing:c,complete:function(){f?(h.update(),h.items[t].reset()):u.setPos(d.px+("Y"==m?0:p),d.py+("Y"==m?p:0)).css3d["origin"+m](p>0?0:1)["rot"+("Y"==m?"X":"Y")](p*("Y"==m?1:-1)*(90-180*Math.atan(.5*("Y"==m?h.itemHeight:h.itemWidth)/h.options.perspective)/Math.PI)).update().animate("opacity",f?0:1,{duration:n,easing:l}).animate("rot"+("Y"==m?"X":"Y"),0,{duration:n,easing:l,complete:function(){h.update(),h.items[t].reset()}})}});break;case"slideX":case"slideY":case"-slideX":case"-slideY":m=m.toLowerCase(),h.swapItems(t,e),u.elem.css("overflow","hidden"),d.elem.css("overflow","hidden"),u.css3d.animate(m,-p*("x"==m?h.itemWidth:h.itemHeight),{duration:s,easing:c,complete:function(){h.update(),u.reset()}}),d.setPos(u.px,u.py).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),d.css3d[m](p*("x"==m?h.itemWidth:h.itemHeight)).update().animate(m,0,{duration:n,easing:l});break;case"flipX":case"flipY":case"-flipX":case"-flipY":h.swapItems(t,e),u.css3d.animate("rot"+m,90*-p,{duration:s,easing:c,complete:function(){d.setPos(u.px,u.py).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),d.css3d["rot"+m](90*p).opacity(.5).update().animate("opacity",1,{duration:n,easing:l}).animate("rot"+m,0,{duration:n,easing:l,complete:function(){h.update(),u.reset()}})}});break;case"slideRow":case"-slideRow":for(m="x",r=u.py,e=h.getIndex(p>0?h.xCount-1:0,r),u=h.items[e],h.swapItems(t,e),x=0;x<h.xCount-1;x++)h.swapItems(h.getIndex(p>0?h.xCount-1-x:x,r),h.getIndex(p>0?h.xCount-2-x:x+1,r));h.overflow=h.elem.css("overflow"),h.elem.css("overflow","hidden"),h.items[p>0?h.getIndex(0,r):h.getIndex(h.xCount-1,r)].setPos(p>0?0:h.xCount-1,r).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),h.items[p>0?h.getIndex(0,r):h.getIndex(h.xCount-1,r)].css3d.x(-p*h.itemWidth).update().animate("x",0,{duration:i,easing:a,change:function(e){for(x=p>0?1:0;x<h.xCount-(p>0?0:1);x++)h.rows[r][x].css3d.x(p*h.itemWidth+e).update();u.css3d.x(p*h.itemWidth+e).update()},complete:function(){h.update(),u.reset()}});break;case"slideColumn":case"-slideColumn":for(m="y",r=u.px,e=h.getIndex(r,p>0?h.yCount-1:0),u=h.items[e],h.swapItems(t,e),x=0;x<h.yCount-1;x++)h.swapItems(h.getIndex(r,p>0?h.yCount-1-x:x),h.getIndex(r,p>0?h.yCount-2-x:x+1));h.overflow=h.elem.css("overflow"),h.elem.css("overflow","hidden"),h.items[p>0?h.getIndex(r,0):h.getIndex(r,h.yCount-1)].setPos(r,p>0?0:h.yCount-1).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),h.items[p>0?h.getIndex(r,0):h.getIndex(r,h.yCount-1)].css3d.y(-p*h.itemHeight).update().animate("y",0,{duration:i,easing:a,change:function(e){for(x=p>0?1:0;x<h.yCount-(p>0?0:1);x++)h.columns[r][x].css3d.y(p*h.itemHeight+e).update();u.css3d.y(p*h.itemHeight+e).update()},complete:function(){h.update(),u.reset()}});break;case"fade":default:h.swapItems(t,e),u.elem.css("z-index",0),d.setPos(u.px,u.py).loadThumb().elem.css({width:h.itemWidth,height:h.itemHeight}).show(),d.css3d.opacity(0).update().animate("opacity",1,{duration:i,easing:a,complete:function(){h.update(),u.reset()}})}return h}},getIndex:function(e,t){var o=this;return t*o.xCount+e},swapItems:function(e,t){var o,i,a,r=this;return a=r.grid.length,o=r.items[e],i=r.items[t],r.items[e]=i,r.items[t]=o,a>e&&(r.grid[e]=i,r.rows[Math.floor(e/r.xCount)][e%r.xCount]=i,r.columns[e%r.xCount][Math.floor(e/r.xCount)]=i),a>t&&(r.grid[t]=o,r.rows[Math.floor(t/r.xCount)][t%r.xCount]=o,r.columns[t%r.xCount][Math.floor(t/r.xCount)]=o),r},api:function(t,o){var i=this;if("string"==typeof t){switch(t){case"update":i.update();break;case"start":i.manager.start();break;case"stop":i.manager.stop();break;case"show":i.manager.getItem(o[0],o[1],o[2],o[3],o[4]);break;case"option":var a={};a[o[0]]=o[1],i.options=e.extend(!0,{},i.options,a),i.update();break;case"destroy":i.destroy()}return!0}return!1}},s.prototype={start:function(e){var t=this;return x({id:"timer",context:t,from:0,to:1,duration:e||t.base.options.delay||1,complete:function(){t.destroyed||(t.getItem(),t.start(t.animationDuration+t.base.options.delay))}}),t},stop:function(){var e=this;return p(e.timer),e},pause:function(){var e=this;return e.paused=!0,e},resume:function(){var e=this;return e.paused=!1,e},getItem:function(e,t,o,a,r){var s,n,c,l,u,d,m=this;if(!m.paused){for((e===i||e===!1)&&(e=Math.floor(Math.random()*m.base.grid.length)),(t===i||t===!1)&&(t=Math.floor(Math.random()*(m.base.items.length-m.base.grid.length))+m.base.grid.length),e>m.base.grid.length-1&&(e-=m.base.grid.length-1),s=(m.base.options.animations||"rollInX,rollInY,rollOutX,rollOutY,slideX,slideY,flipX,flipY,slideRow,slideColumn,fade,-rollInX,-rollInY,-rollOutX,-rollOutY,-slideX,-slideY,-flipX,-flipY,-slideRow,-slideColumn,-fade").split(","),n=m.base.options.animationsExcluded?m.base.options.animationsExcluded.split(","):[],d=n.length,u=0;d>u;u++)s.splice(s.indexOf(n[u]),1);if(o=o||s[Math.floor(Math.random()*s.length)],!f&&["rollInX","rollInY","rollOutX","rollOutY","flipX","flipY"].indexOf(o.replace("-",""))&&(o="fade"),"item"==m.base.options.onHoverExclude&&m.base.items[e].elem.hasClass("hover")||m.base.items[e].elem.hasClass(m.base.options.fixedClass))return m.getItem(e+1,t,o,a,r);if(-1!=["rollOutX","slideRow","-rollOutX","-slideRow"].indexOf(o)){for(l=m.base.items[e].py,d=m.base.rows[l].length,u=0;d>u;u++)if("item"==m.base.options.onHoverExclude&&m.base.rows[l][u].elem.hasClass("hover")||m.base.rows[l][u].elem.hasClass(m.base.options.fixedClass))return m.getItem(e+m.base.xCount,t,o,a,r)}else if(-1!=["rollOutY","slideColumn","-rollOutY","-slideColumn"].indexOf(o))for(c=m.base.items[e].px,d=m.base.columns[c].length,u=0;d>u;u++)if("item"==m.base.options.onHoverExclude&&m.base.columns[c][u].elem.hasClass("hover")||m.base.columns[c][u].elem.hasClass(m.base.options.fixedClass))return m.getItem(e+1,t,o,a,r);return m.base.getItem(e,t,o,a||m.base.options[o.replace("-","")+"Duration"]||m.base.options.duration,r||m.base.options[o.replace("-","")+"Easing"]||m.base.options.easing),m.animationDuration=a||m.base.options[o.replace("-","")+"Duration"]||m.base.options.duration,m}}},n.prototype={init:function(t){var o=this;return o.elem=e(t),o.elem.wrapInner(e("<div/>").addClass(y.itemWrap.slice(1))),o.content=o.elem.children().eq(0),o.elem.css(A.css+"perspective",o.base.options.perspective),o.css3d=new a(o.content),o.elem.on("mouseenter",{t:o},o.handleMouseOver),o.elem.on("mouseleave",{t:o},o.handleMouseOut),o.elem.on("touchend",{t:o},o.handleTouchEnd),o},handleMouseOver:function(e){var t=e.data.t;t.elem.addClass("hover").siblings().removeClass("hover"),"all"==t.base.options.onHoverExclude&&t.base.manager.pause()},handleMouseOut:function(e){var t=e.data.t;t.elem.removeClass("hover"),"all"==t.base.options.onHoverExclude&&t.base.manager.resume()},handleTouchEnd:function(e){var t=e.data.t;return t.elem.hasClass("hover")?void 0:(e.preventDefault(),t.handleMouseOver(e),!1)},loadThumb:function(){var t=this,o=t.elem.data("thumb"),i=new Image;return t.thumbLoaded||!o?t:(t.elem.addClass("loading"),t.thumbLoaded=!0,i.onload=function(){t.content.append(e("<div/>").addClass(y.thumb.slice(1)).css({"background-image":"url("+o+")","background-position":"center center","background-repeat":"no-repeat","background-size":t.base.options.sizing}).fadeTo(0,0).fadeTo(300,1)),t.elem.removeClass("loading")},i.src=o,t)},setPos:function(e,t){var o=this;return o.px=e,o.py=t,o.elem.css({left:o.px*o.base.itemWidth,top:o.py*o.base.itemHeight}),o},reset:function(){var e=this;return e.elem.css({"z-index":0,overflow:"visible"}),e.css3d.stop("x,y,z,rotX,rotY,rotZ,opacity").set("x,y,z,rotX,rotY,rotZ",0).opacity(1).origin(.5).update(),e},destroy:function(){var e=this;return e.reset(),e.elem.off("mouseenter",e.handleMouseOver),e.elem.off("mouseleave",e.handleMouseOut),e.elem.empty().removeClass("hover").removeAttr("style"),e}},e.extend(e.fn,{magicWall:function(t){var o=Array.prototype.slice.call(arguments,1);return e(this).each(function(){var i=e(this).data("_"+u+"Instance");("string"!=typeof t||i)&&(i=i||new r(this),i.init(t,o),e(this).data("_"+u+"Instance",i))})}}),e.fn[u].options={animations:!1,animationsExcluded:!1,delay:500,maxItemWidth:240,maxItemHeight:160,countX:!1,countY:!1,minCountX:1,minCountY:1,maxCountX:!1,maxCountY:!1,onHoverExclude:!1,sizing:"cover",fixedClass:"fixed",perspective:600,duration:650,easing:"easeInOutCubic",rollInXDuration:!1,rollInXEasing:"easeInCubicOutCubic",rollInYDuration:!1,rollInYEasing:"easeInCubicOutCubic",rollOutXDuration:!1,rollOutXEasing:"easeInCubicOutCubic",rollOutYDuration:!1,rollOutYEasing:"easeInCubicOutCubic",flipXDuration:!1,flipXEasing:"easeInCubicOutCubic",flipYDuration:!1,flipYEasing:"easeInCubicOutCubic",slideXDuration:!1,slideXEasing:!1,slideYDuration:!1,slideYEasing:!1,slideRowDuration:!1,slideRowEasing:!1,slideColumnDuration:!1,slideColumnEasing:!1,fadeDuration:!1,fadeEasing:!1,breakpoints:!1}}(jQuery,window,document);